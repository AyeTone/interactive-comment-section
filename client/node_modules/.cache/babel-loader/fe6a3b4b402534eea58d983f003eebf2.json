{"ast":null,"code":"import _slicedToArray from\"/Users/Troy/Projects/interactive-comment-section/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from\"react\";import ReplyBtn from\"../../images/icon-reply.svg\";import{ReactComponent as Plus}from\"../../images/icon-plus.svg\";import{ReactComponent as Minus}from\"../../images/icon-minus.svg\";import{ReactComponent as Delete}from\"../../images/icon-delete.svg\";import{ReactComponent as Edit}from\"../../images/icon-edit.svg\";import DataContext from\"../../Context/DataContent\";import InputBox from\"../InputBox\";import CommentBody from\"./CommentBody\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Comment=function Comment(_ref){var comment=_ref.comment,reply=_ref.reply;var _useContext=useContext(DataContext),currentUser=_useContext.currentUser,setDisplayModal=_useContext.setDisplayModal;var _ref2=comment||reply,content=_ref2.content,createdAt=_ref2.createdAt,score=_ref2.score,user=_ref2.user,replyingTo=_ref2.replyingTo,id=_ref2.id;var _useState=useState({current:score,hasAdded:false,hasSubtracted:false}),_useState2=_slicedToArray(_useState,2),currentScore=_useState2[0],setCurrentScore=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),displayReply=_useState4[0],setDisplayReply=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),editing=_useState6[0],setEditing=_useState6[1];var username=user.username;var isCurrentUser=currentUser.username===user.username;var addToScore=function addToScore(){var current=currentScore.current,hasAdded=currentScore.hasAdded;if(current!==score&&!hasAdded){setCurrentScore({hasSubtracted:false,current:score,hasAdded:false});}else if(!hasAdded){setCurrentScore({hasSubtracted:false,current:score+1,hasAdded:true});}};var subtractScore=function subtractScore(){var current=currentScore.current,hasSubtracted=currentScore.hasSubtracted;if(current!==score&&!hasSubtracted){setCurrentScore({hasSubtracted:false,current:score,hasAdded:false});}else if(!hasSubtracted){setCurrentScore({hasSubtracted:true,current:score-1,hasAdded:false});}};var showPrompt=function showPrompt(commentId){setDisplayModal({isDisplayed:true,id:commentId});};var showReply=function showReply(){setDisplayReply(true);};var displayBtns=!isCurrentUser?/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return showReply();},className:\"comment__reply--btn\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"comment__reply--img\",src:ReplyBtn,alt:\"reply button\"}),\" \",\"Reply\"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"comment__current-user-btn \",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return showPrompt(id);},className:\"comment__current-user-btn--delete\",children:[/*#__PURE__*/_jsx(Delete,{}),\"Delete\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return setEditing(true);},className:\"comment__current-user-btn--edit\",children:[/*#__PURE__*/_jsx(Edit,{}),\"Edit\"]})]});return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"article\",{className:\"comment\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment__content\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"comment__header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment__header--row\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"comment__header--avatar\",src:user.image.webp,alt:\"\".concat(username,\" avatar\")}),/*#__PURE__*/_jsx(\"h1\",{className:\"comment__header--user\",children:username}),isCurrentUser&&/*#__PURE__*/_jsx(\"p\",{className:\"comment__header--current-user\",children:\" you\"}),/*#__PURE__*/_jsx(\"p\",{className:\"comment__header--time\",children:createdAt})]}),/*#__PURE__*/_jsx(\"div\",{className:\"tablet\",children:displayBtns})]}),/*#__PURE__*/_jsx(CommentBody,{editing:editing,setEditing:setEditing,replyingTo:replyingTo,content:content})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment__buttons\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment__likes\",children:[/*#__PURE__*/_jsx(Plus,{onClick:function onClick(){return addToScore();},className:currentScore.current>score?\"comment__likes--plus-btn selected\":\"comment__likes--plus-btn\"}),/*#__PURE__*/_jsx(\"p\",{className:\"comment__likes--score\",children:currentScore.current}),/*#__PURE__*/_jsx(Minus,{onClick:function onClick(){return subtractScore();},className:currentScore.current<score?\"comment__likes--minus-btn selected\":\"comment__likes--minus-btn\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mobile\",children:displayBtns})]})]}),displayReply&&/*#__PURE__*/_jsx(InputBox,{id:id,replyingTo:user.username,displayReply:displayReply,setDisplayReply:setDisplayReply})]});};export default Comment;","map":{"version":3,"names":["React","useContext","useState","ReplyBtn","ReactComponent","Plus","Minus","Delete","Edit","DataContext","InputBox","CommentBody","Comment","comment","reply","currentUser","setDisplayModal","content","createdAt","score","user","replyingTo","id","current","hasAdded","hasSubtracted","currentScore","setCurrentScore","displayReply","setDisplayReply","editing","setEditing","username","isCurrentUser","addToScore","subtractScore","showPrompt","commentId","isDisplayed","showReply","displayBtns","image","webp"],"sources":["/Users/Troy/Projects/interactive-comment-section/client/src/components/Comment/Comment.jsx"],"sourcesContent":["import React, { useContext, useState } from \"react\";\nimport ReplyBtn from \"../../images/icon-reply.svg\";\nimport { ReactComponent as Plus } from \"../../images/icon-plus.svg\";\nimport { ReactComponent as Minus } from \"../../images/icon-minus.svg\";\nimport { ReactComponent as Delete } from \"../../images/icon-delete.svg\";\nimport { ReactComponent as Edit } from \"../../images/icon-edit.svg\";\nimport DataContext from \"../../Context/DataContent\";\nimport InputBox from \"../InputBox\";\nimport CommentBody from \"./CommentBody\";\n\nconst Comment = ({ comment, reply }) => {\n  const { currentUser, setDisplayModal } = useContext(DataContext);\n  const { content, createdAt, score, user, replyingTo, id } = comment || reply;\n  const [currentScore, setCurrentScore] = useState({\n    current: score,\n    hasAdded: false,\n    hasSubtracted: false,\n  });\n  const [displayReply, setDisplayReply] = useState(false);\n  const [editing, setEditing] = useState(false);\n  const username = user.username;\n  const isCurrentUser = currentUser.username === user.username;\n\n  const addToScore = () => {\n    const { current, hasAdded } = currentScore;\n\n    if (current !== score && !hasAdded) {\n      setCurrentScore({\n        hasSubtracted: false,\n        current: score,\n        hasAdded: false,\n      });\n    } else if (!hasAdded) {\n      setCurrentScore({\n        hasSubtracted: false,\n        current: score + 1,\n        hasAdded: true,\n      });\n    }\n  };\n\n  const subtractScore = () => {\n    const { current, hasSubtracted } = currentScore;\n\n    if (current !== score && !hasSubtracted) {\n      setCurrentScore({\n        hasSubtracted: false,\n        current: score,\n        hasAdded: false,\n      });\n    } else if (!hasSubtracted) {\n      setCurrentScore({\n        hasSubtracted: true,\n        current: score - 1,\n        hasAdded: false,\n      });\n    }\n  };\n\n  const showPrompt = (commentId) => {\n    setDisplayModal({ isDisplayed: true, id: commentId });\n  };\n\n  const showReply = () => {\n    setDisplayReply(true);\n  };\n\n  const displayBtns = !isCurrentUser ? (\n    <button onClick={() => showReply()} className=\"comment__reply--btn\">\n      <img className=\"comment__reply--img\" src={ReplyBtn} alt=\"reply button\" />{\" \"}\n      Reply\n    </button>\n  ) : (\n    <div className=\"comment__current-user-btn \">\n      <button\n        onClick={() => showPrompt(id)}\n        className=\"comment__current-user-btn--delete\"\n      >\n        <Delete />\n        Delete\n      </button>\n      <button\n        onClick={() => setEditing(true)}\n        className=\"comment__current-user-btn--edit\"\n      >\n        <Edit />\n        Edit\n      </button>\n    </div>\n  );\n\n  return (\n    <>\n      <article className=\"comment\">\n        <div className=\"comment__content\">\n          <header className=\"comment__header\">\n            <div className=\"comment__header--row\">\n              <img\n                className=\"comment__header--avatar\"\n                src={user.image.webp}\n                alt={`${username} avatar`}\n              />\n              <h1 className=\"comment__header--user\">{username}</h1>\n              {isCurrentUser && (\n                <p className=\"comment__header--current-user\"> you</p>\n              )}\n              <p className=\"comment__header--time\">{createdAt}</p>\n            </div>\n\n            <div className=\"tablet\">{displayBtns}</div>\n          </header>\n\n          <CommentBody\n            editing={editing}\n            setEditing={setEditing}\n            replyingTo={replyingTo}\n            content={content}\n          />\n        </div>\n\n        <div className=\"comment__buttons\">\n          <div className=\"comment__likes\">\n            <Plus\n              onClick={() => addToScore()}\n              className={\n                currentScore.current > score\n                  ? \"comment__likes--plus-btn selected\"\n                  : \"comment__likes--plus-btn\"\n              }\n            />\n            <p className=\"comment__likes--score\">{currentScore.current}</p>\n            <Minus\n              onClick={() => subtractScore()}\n              className={\n                currentScore.current < score\n                  ? \"comment__likes--minus-btn selected\"\n                  : \"comment__likes--minus-btn\"\n              }\n            />\n          </div>\n          <div className=\"mobile\">{displayBtns}</div>\n        </div>\n      </article>\n\n      {displayReply && (\n        <InputBox\n          id={id}\n          replyingTo={user.username}\n          displayReply={displayReply}\n          setDisplayReply={setDisplayReply}\n        />\n      )}\n    </>\n  );\n};\n\nexport default Comment;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}