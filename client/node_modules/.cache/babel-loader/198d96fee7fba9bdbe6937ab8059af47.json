{"ast":null,"code":"import _slicedToArray from\"/Users/Troy/Projects/interactive-comment-section/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useContext,useState}from\"react\";import ReplyBtn from\"../../images/icon-reply.svg\";import{ReactComponent as Plus}from\"../../images/icon-plus.svg\";import{ReactComponent as Minus}from\"../../images/icon-minus.svg\";import Delete from\"../../images/icon-delete.svg\";import Edit from\"../../images/icon-edit.svg\";import DataContext from\"../../Context/DataContent\";import InputBox from\"../InputBox\";import CommentBody from\"./CommentBody\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var Comment=function Comment(_ref){var comment=_ref.comment,reply=_ref.reply;var _useContext=useContext(DataContext),currentUser=_useContext.currentUser,setDisplayModal=_useContext.setDisplayModal;var _ref2=comment||reply,content=_ref2.content,createdAt=_ref2.createdAt,score=_ref2.score,user=_ref2.user,replyingTo=_ref2.replyingTo,id=_ref2.id;var _useState=useState({current:score,hasAdded:false,hasSubtracted:false}),_useState2=_slicedToArray(_useState,2),currentScore=_useState2[0],setCurrentScore=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),displayReply=_useState4[0],setDisplayReply=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),edit=_useState6[0],setEdit=_useState6[1];var isCurrentUser=currentUser.username===user.username;var addToScore=function addToScore(){var current=currentScore.current,hasAdded=currentScore.hasAdded;if(current!==score&&!hasAdded){setCurrentScore({hasSubtracted:false,current:score,hasAdded:false});}else if(!hasAdded){setCurrentScore({hasSubtracted:false,current:score+1,hasAdded:true});}};var subtractScore=function subtractScore(){var current=currentScore.current,hasSubtracted=currentScore.hasSubtracted;if(current!==score&&!hasSubtracted){setCurrentScore({hasSubtracted:false,current:score,hasAdded:false});}else if(!hasSubtracted){setCurrentScore({hasSubtracted:true,current:score-1,hasAdded:false});}};var showPrompt=function showPrompt(commentId){setDisplayModal({isDisplayed:true,id:commentId});};var showReply=function showReply(){setDisplayReply(true);};return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"article\",{className:reply?\"comment reply\":\"comment\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"comment__content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"header\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"details\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"avatar\",src:user.image.webp,alt:\"user avatar\"}),/*#__PURE__*/_jsx(\"p\",{className:\"user\",children:user.username}),isCurrentUser&&/*#__PURE__*/_jsx(\"p\",{className:\"you\",children:\" you\"}),/*#__PURE__*/_jsx(\"p\",{className:\"time\",children:createdAt})]}),/*#__PURE__*/_jsx(\"div\",{children:!isCurrentUser?/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return showReply();},className:\"comment__reply desktop\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"replyImg\",src:ReplyBtn,alt:\"reply button\"}),\" \",\"Reply\"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"comment__userBtns desktop\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return showPrompt(id);},className:\"comment__delete\",children:[/*#__PURE__*/_jsx(\"img\",{src:Delete,alt:\"delete\"}),\"Delete\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return setEdit(true);},className:\"comment__edit\",children:[/*#__PURE__*/_jsx(\"img\",{src:Edit,alt:\"delete\"}),\"Edit\"]})]})})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text\",children:/*#__PURE__*/_jsx(CommentBody,{edit:edit,setEdit:setEdit,replyingTo:replyingTo,content:content})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"comment__buttons\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"likes\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:addToScore,className:\"plusBtn\",children:/*#__PURE__*/_jsx(Plus,{})}),/*#__PURE__*/_jsx(\"p\",{className:\"score\",children:currentScore.current}),/*#__PURE__*/_jsx(\"button\",{onClick:subtractScore,className:\"minusBtn\",children:/*#__PURE__*/_jsx(Minus,{})})]}),!isCurrentUser?/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return showReply();},className:\"comment__reply mobile\",children:[/*#__PURE__*/_jsx(\"img\",{className:\"replyImg\",src:ReplyBtn,alt:\"reply button\"}),\" \",\"Reply\"]}):/*#__PURE__*/_jsxs(\"div\",{className:\"comment__userBtns mobile\",children:[/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return showPrompt(id);},className:\"comment__delete\",children:[/*#__PURE__*/_jsx(\"img\",{src:Delete,alt:\"delete\"}),\"Delete\"]}),/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return setEdit(true);},className:\"comment__edit\",children:[/*#__PURE__*/_jsx(\"img\",{src:Edit,alt:\"delete\"}),\"Edit\"]})]})]})]}),/*#__PURE__*/_jsx(\"div\",{className:replyingTo?\"reply__input\":null,children:displayReply&&/*#__PURE__*/_jsx(InputBox,{id:id,replyingTo:user.username,displayReply:displayReply,setDisplayReply:setDisplayReply})})]});};export default Comment;","map":{"version":3,"names":["React","useContext","useState","ReplyBtn","ReactComponent","Plus","Minus","Delete","Edit","DataContext","InputBox","CommentBody","Comment","comment","reply","currentUser","setDisplayModal","content","createdAt","score","user","replyingTo","id","current","hasAdded","hasSubtracted","currentScore","setCurrentScore","displayReply","setDisplayReply","edit","setEdit","isCurrentUser","username","addToScore","subtractScore","showPrompt","commentId","isDisplayed","showReply","image","webp"],"sources":["/Users/Troy/Projects/interactive-comment-section/client/src/components/Comment/Comment.jsx"],"sourcesContent":["import React, { useContext, useState } from \"react\";\nimport ReplyBtn from \"../../images/icon-reply.svg\";\nimport { ReactComponent as Plus } from \"../../images/icon-plus.svg\";\nimport { ReactComponent as Minus } from \"../../images/icon-minus.svg\";\nimport Delete from \"../../images/icon-delete.svg\";\nimport Edit from \"../../images/icon-edit.svg\";\nimport DataContext from \"../../Context/DataContent\";\nimport InputBox from \"../InputBox\";\nimport CommentBody from \"./CommentBody\";\n\nconst Comment = ({ comment, reply }) => {\n  const { currentUser, setDisplayModal } = useContext(DataContext);\n  const { content, createdAt, score, user, replyingTo, id } = comment || reply;\n  const [currentScore, setCurrentScore] = useState({\n    current: score,\n    hasAdded: false,\n    hasSubtracted: false,\n  });\n  const [displayReply, setDisplayReply] = useState(false);\n  const [edit, setEdit] = useState(false);\n\n  const isCurrentUser = currentUser.username === user.username;\n\n  const addToScore = () => {\n    const { current, hasAdded } = currentScore;\n\n    if (current !== score && !hasAdded) {\n      setCurrentScore({\n        hasSubtracted: false,\n        current: score,\n        hasAdded: false,\n      });\n    } else if (!hasAdded) {\n      setCurrentScore({\n        hasSubtracted: false,\n        current: score + 1,\n        hasAdded: true,\n      });\n    }\n  };\n\n  const subtractScore = () => {\n    const { current, hasSubtracted } = currentScore;\n\n    if (current !== score && !hasSubtracted) {\n      setCurrentScore({\n        hasSubtracted: false,\n        current: score,\n        hasAdded: false,\n      });\n    } else if (!hasSubtracted) {\n      setCurrentScore({\n        hasSubtracted: true,\n        current: score - 1,\n        hasAdded: false,\n      });\n    }\n  };\n\n  const showPrompt = (commentId) => {\n    setDisplayModal({ isDisplayed: true, id: commentId });\n  };\n\n  const showReply = () => {\n    setDisplayReply(true);\n  };\n\n  return (\n    <>\n      <article className={reply ? \"comment reply\" : \"comment\"}>\n        <div className=\"comment__content\">\n          <div className=\"header\">\n            <div className=\"details\">\n              <img className=\"avatar\" src={user.image.webp} alt=\"user avatar\" />\n              <p className=\"user\">{user.username}</p>\n              {isCurrentUser && <p className=\"you\"> you</p>}\n              <p className=\"time\">{createdAt}</p>\n            </div>\n            <div>\n              {!isCurrentUser ? (\n                <button\n                  onClick={() => showReply()}\n                  className=\"comment__reply desktop\"\n                >\n                  <img className=\"replyImg\" src={ReplyBtn} alt=\"reply button\" />{\" \"}\n                  Reply\n                </button>\n              ) : (\n                <div className=\"comment__userBtns desktop\">\n                  <button\n                    onClick={() => showPrompt(id)}\n                    className=\"comment__delete\"\n                  >\n                    <img src={Delete} alt=\"delete\" />\n                    Delete\n                  </button>\n                  <button\n                    onClick={() => setEdit(true)}\n                    className=\"comment__edit\"\n                  >\n                    <img src={Edit} alt=\"delete\" />\n                    Edit\n                  </button>\n                </div>\n              )}\n            </div>\n          </div>\n          <p className=\"text\">\n            <CommentBody\n              edit={edit}\n              setEdit={setEdit}\n              replyingTo={replyingTo}\n              content={content}\n            />\n          </p>\n        </div>\n        <div className=\"comment__buttons\">\n          <div className=\"likes\">\n            <button onClick={addToScore} className=\"plusBtn\">\n              <Plus />\n            </button>\n            <p className=\"score\">{currentScore.current}</p>\n            <button onClick={subtractScore} className=\"minusBtn\">\n              <Minus />\n            </button>\n          </div>\n          {!isCurrentUser ? (\n            <button\n              onClick={() => showReply()}\n              className=\"comment__reply mobile\"\n            >\n              <img className=\"replyImg\" src={ReplyBtn} alt=\"reply button\" />{\" \"}\n              Reply\n            </button>\n          ) : (\n            <div className=\"comment__userBtns mobile\">\n              <button\n                onClick={() => showPrompt(id)}\n                className=\"comment__delete\"\n              >\n                <img src={Delete} alt=\"delete\" />\n                Delete\n              </button>\n              <button onClick={() => setEdit(true)} className=\"comment__edit\">\n                <img src={Edit} alt=\"delete\" />\n                Edit\n              </button>\n            </div>\n          )}\n        </div>\n      </article>\n      <div className={replyingTo ? \"reply__input\" : null}>\n        {displayReply && (\n          <InputBox\n            id={id}\n            replyingTo={user.username}\n            displayReply={displayReply}\n            setDisplayReply={setDisplayReply}\n          />\n        )}\n      </div>\n    </>\n  );\n};\n\nexport default Comment;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}